language: java
install: mvn install -DskipTests
before_install:
  - openssl aes-256-cbc -K $encrypted_b9997e150274_key -iv $encrypted_b9997e150274_iv
    -in key.asc.enc -out key.asc -d
  - echo $PGP_PASSPHRASE | gpg --passphrase-fd 0 --batch --yes --import key.asc
after_success:
  - bash <(curl -s https://codecov.io/bash)
cache:
  directories:
    - "$HOME/.m2"
deploy:
  - provider: script
    script: mvn -X deploy --settings .travis/settings.xml -Dgpg.passphrase=${PGP_PASSPHRASE}
      -DskipTests=true -B -U -Prelease
    skip_cleanup: true
    on:
      repo: imrafaelmerino/json-values
      tags: true
  - provider: releases
    skip_cleanup: true
    api_key: "$GITHUB_TOKEN"
    draft: false
    prerelease: false
    body: 'Generated by TravisCI during the release process: build URL: $TRAVIS_BUILD_WEB_URL,
    build number: $TRAVIS_BUILD_NUMBER, commit: $TRAVIS_COMMIT, tag: $TRAVIS_TAG'
    name: Fito
    file:
      - target/JAVADOC.zip
      - docs/CHANGELOG.md
      - docs/README.md
      - target/SOURCES.zip
    on:
      repo: imrafaelmerino/json-values
      tags: true
addons:
  sonarcloud:
    organization: "imrafaelmerino"
    token:
      secure: "izk6sVEq8VLn8o5ExcAr3CzFF7w80BA+5Hh5z4d4l+DiShmfTscOngzKSoLhNbWS4IfD5istuoEghjQYQ6+VmMIYaFUfLMcRvnGeQ6ylia1QrRjajy5dTCPuG8WzuFpSJ0PUS2ZK9IVwRxfAveQekowo6Rwm5eMgQH4gj0txphXBvXGv4tbQ1lcpac2hoACx2nYZizTI69KFMgTx2EzVjv5oFRb531aeRElcezStGitVnUfa9i7EMtel59rqO8+5kj5uruQhYQxSNgBeL0hWbXL2a1yQBLoJ5YYE/EJ8cKOxhBSgzCWUezMT9OIZUJlAYgtFbexyDayuGo0tjqwmcLIdzv2QgANkXAARJLx0J0Dc7LzS/YJX6hZkJDbdryO/omwZhm5bXg+WAA5dUvyediU2AKPDslCbBxPNYdkvVeYfToTccdkstOpevO11BFUBjsf0bOGdBQraYbK3I9LRxDQVM+PDH+UtC7uWucG2VXkf1BoQlX1HjnUQYjb4B4wH3pFDiCLgdtiKWh3VdQpPfuoOAxiI8gLD3JftRZYm2fQ9DJDa4AB3+cWgiWk9CQ585b/2MBSVx7ZqpztsZtdTcmh1BNbps4I5S3nePsaKPg/EOEKh+5MMV2xhY2pnbtQsX3MKssMAuyAGjdahlhM3a9m4c8/W0OoPcLgMPQViOtA="
script:
  - mvn clean verify sonar:sonar  -Pcoverage -Dsonar.projectKey=imrafaelmerino_json-values


